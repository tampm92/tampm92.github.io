__NUXT_JSONP__("/vn/blog/next-js/setup-firebase-for-next-js", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu){bt._id=h;bt.name=z;bt.alternativeText=e;bt.caption=e;bt.hash=A;bt.ext=a;bt.mime=b;bt.size=B;bt.width=C;bt.height=f;bt.url=D;bt.formats={thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}};bt.provider=i;bt.related=[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o];bt.createdAt=ah;bt.updatedAt=ai;bt.__v=c;bt.id=h;return {data:[{links:{recent_posts:[{isPublished:x,isPin:ak,_id:o,name:aJ,slug:aN,publishedDate:aO,published_at:aP,createdAt:aQ,updatedAt:aR,__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:aK,name:aJ,content:aS,shortDescription:aL,description:aL,published_at:aT,slug:aU,createdAt:aV,updatedAt:aW,__v:c,post:o,id:aK}],id:o,path:"\u002Fblog\u002Fnext-js\u002Fsetup-firebase-for-next-js"},{isPublished:x,isPin:ak,_id:w,name:aX,slug:"next-js-import-svg",publishedDate:"2021-01-13",published_at:"2021-01-12T11:31:37.079Z",createdAt:"2021-01-12T11:31:34.725Z",updatedAt:"2021-01-12T11:37:00.900Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:aY,name:aX,content:"## Referents\n\n- [Next JS](https:\u002F\u002Fnextjs.org\u002F)\n- [@svgr\u002Fwebpack](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@svgr\u002Fwebpack)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Informations\n\nYou need to provide a webpack loader that will handle SVG imports, one of the famous one is svgr.\n\n## Install libs\n\n```bash\nyarn add -D @svgr\u002Fwebpack\n```\n\n## Setup SVG\n\n- Update file `next.config.js`\n\n```js\nmodule.exports = {\n  webpack(config) {\n    config.module.rules.push({\n      test: \u002F\\.svg$\u002F,\n      issuer: {\n        test: \u002F\\.(js|ts)x?$\u002F,\n      },\n      use: ['@svgr\u002Fwebpack'],\n    });\n\n    return config;\n  },\n};\n```\n",shortDescription:aZ,description:aZ,published_at:"2021-01-12T09:58:19.045Z",slug:"next-js-import-svg-en",createdAt:"2021-01-12T09:58:09.337Z",updatedAt:"2021-01-12T11:48:50.660Z",__v:c,post:w,id:aY}],id:w,path:"\u002Fblog\u002Fnext-js\u002Fnext-js-import-svg"},{isPublished:x,isPin:ak,_id:u,name:a_,slug:"next-auth",publishedDate:a$,published_at:"2021-01-12T09:30:10.164Z",createdAt:"2021-01-12T09:29:47.830Z",updatedAt:"2021-01-12T09:30:10.420Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:ba,name:a_,content:"## Referents\n\n- [Next JS](https:\u002F\u002Fnextjs.org\u002F)\n- [Next Auht](https:\u002F\u002Fnext-auth.js.org\u002F)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Prepare social app\n\n- [Github](https:\u002F\u002Fdocs.github.com\u002Fen\u002Ffree-pro-team@latest\u002Fdevelopers\u002Fapps\u002Fcreating-an-oauth-app)\n- [Google](https:\u002F\u002Fconsole.developers.google.com\u002Fapis\u002Fcredentials)\n- [Facebook](https:\u002F\u002Fdevelopers.facebook.com\u002Fdocs\u002Ffacebook-login\u002Fweb)\n\n\u003E **TIP**: callback url: `{baseUrl}\u002Fapi\u002Fauth\u002Fcallback\u002F{provider}`\n\n## Install libs\n\n```bash\nyarn add next-auth\n```\n\n## Setup ENV\n\n- Add file `.env.local`\n\n```css\nENV=development\nNEXTAUTH_URL=http:\u002F\u002Flocalhost:3000\nSECRET=\nFACEBOOK_ID=\nFACEBOOK_SECRET=\nGITHUB_ID=\nGITHUB_SECRET=\nGOOGLE_ID=\nGOOGLE_SECRET=\n```\n\n## Setup Next-Auth\n\n- Add file `pages\\api\\auth\\[...nextauth].js`\n\n```jsx\nimport NextAuth from 'next-auth'\nimport Providers from 'next-auth\u002Fproviders'\n\nconst options = {\n  providers: [\n    \u002F\u002F fake login by username\u002Fpassword\n    Providers.Credentials({\n      id: 'tpCredentials',\n      name: 'TpCredentials',\n      credentials: {\n        username: { label: \"Username\", type: \"text\", placeholder: \"Username\" },\n        password: {  label: \"Password\", type: \"password\", placeholder: \"Password\" }\n      },\n      authorize: async (credentials) =\u003E {\n        const users = [\n          { id: 1, name: 'J Test', email: 'test@example.com', image: 'https:\u002F\u002Flive.staticflickr.com\u002F65535\u002F48991856476_e02e5b2f51_s.jpg', username: 'test', password: '123456' }\n        ]\n\n        const user = users.find( user =\u003E \n          user.username === credentials.username\n          && user.password === credentials.password\n        )\n  \n        if (user) {\n          return Promise.resolve(user)\n        } else {\n          return Promise.resolve(null)\n        }\n      }\n    }),\n    Providers.Google({\n      clientId: process.env.GOOGLE_ID,\n      clientSecret: process.env.GOOGLE_SECRET\n    }),\n    Providers.Facebook({\n      clientId: process.env.FACEBOOK_ID,\n      clientSecret: process.env.FACEBOOK_SECRET\n    }),\n    Providers.GitHub({\n      clientId: process.env.GITHUB_ID,\n      clientSecret: process.env.GITHUB_SECRET\n    })\n  ],\n  secret: process.env.SECRET,\n\n  session: {\n    jwt: true, \n  },\n  jwt: {\n    secret: process.env.SECRET,\n  },\n  pages: {\n    \u002F\u002F signIn: '\u002Flogin'\n  },\n  debug: process.env.ENV === 'development'\n}\n\nexport default (req, res) =\u003E NextAuth(req, res, options)\n```\n\n- Update file `pages\u002F_app.jsx`\n\n```jsx\nimport { Provider } from 'next-auth\u002Fclient'\n\nexport default function App ({ Component, pageProps }) {\n  return (\n    \u003CProvider session={pageProps.session}\u003E\n      \u003CComponent {...pageProps} \u002F\u003E\n    \u003C\u002FProvider\u003E\n  )\n}\n```\n\n- Update `pages\u002Findex.js`\n\n```jsx\nimport React from 'react'\nimport { signIn, signOut, useSession } from 'next-auth\u002Fclient'\n\nexport default function Page() {\n  const [ session, loading ] = useSession()\n\n  return \u003C\u003E\n    {!session && \u003C\u003E\n      Not signed in \u003Cbr\u002F\u003E\n      \u003Cbutton onClick={signIn}\u003ESign in\u003C\u002Fbutton\u003E\n    \u003C\u002F\u003E}\n    {session && \u003C\u003E\n      Signed in as {session.user.email} \u003Cbr\u002F\u003E\n      \u003Cbutton onClick={signOut}\u003ESign out\u003C\u002Fbutton\u003E\n    \u003C\u002F\u003E}\n  \u003C\u002F\u003E\n}\n```\n\n## Let enjoy\n\nNow you can run `yarn dev`\n\nGo to browser, you can test now\n\n## Advance\n\n### If you need custom login page\n\n- Add file `pages\u002Flogin`\n\n```jsx\nimport React from 'react'\nimport { providers, signIn } from 'next-auth\u002Fclient'\n\nexport default function SignIn({ providers }) {\n  return (\n    \u003C\u003E\n      {Object.values(providers).map(provider =\u003E (\n        \u003Cdiv key={provider.name}\u003E\n          \u003Cbutton onClick={() =\u003E signIn(provider.id)}\u003ESign in with {provider.name}\u003C\u002Fbutton\u003E\n        \u003C\u002Fdiv\u003E\n      ))}\n    \u003C\u002F\u003E\n  )\n}\n\nSignIn.getInitialProps = async (context) =\u003E {\n  return {\n    providers: await providers(context)\n  }\n}\n```\n\n\u003E More info [here](https:\u002F\u002Fnext-auth.js.org\u002Fconfiguration\u002Fpages)\n\n- Open command in file `pages\\api\\auth\\[...nextauth].js`\n\n```jsx\nconst options = {\n  ...\n  pages: {\n    signIn: '\u002Flogin'\n  }\n  ...\n}\n```\n\n- Now, when you click `Sign in` button, you can access your custom login page\n",shortDescription:"NextAuth.js is a complete open source authentication solution for Next.js applications.",description:"NextAuth.js is a complete open source authentication solution for Next.js applications. It is designed from the ground up to support Next.js and Serverless.",published_at:"2021-01-12T09:35:25.707Z",slug:"next-auth-en",createdAt:"2021-01-12T09:35:12.822Z",updatedAt:"2021-01-12T09:35:25.812Z",__v:c,post:u,id:ba}],id:u,path:"\u002Fblog\u002Fnext-js\u002Fnext-auth"},{isPublished:x,isPin:ak,_id:v,name:bb,slug:"dynamic-import-next-js",publishedDate:a$,published_at:"2021-01-12T09:59:51.445Z",createdAt:"2021-01-12T09:59:47.913Z",updatedAt:"2021-01-12T12:41:52.009Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:bc,shortDescription:bd,description:bd,content:"## Whuy?\n\n- How resolve: Expected server HTML to contain a matching `\u003Cdiv\u003E` in `\u003Cdiv\u003E`\n- When the module includes a library that only works in the browser (not working on server-side)\n\n## Referents\n\n- [NextJS](https:\u002F\u002Fnextjs.org)\n- [NextJS dynamic-import](https:\u002F\u002Fnextjs.org\u002Fdocs\u002Fadvanced-features\u002Fdynamic-import)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Example\n\n\u003E You need setup [`@ant-design\u002Fcharts`](https:\u002F\u002Fcharts.ant.design\u002F) on you project\n\nCodes:\n\n```jsx\nimport { Line } from '@ant-design\u002Fcharts'\n\nconst ChartsPage = () =\u003E {\n  const data = [\n    { year: '1991', value1: 3 },\n    { year: '1992', value: 4 },\n    { year: '1993', value: 3.5 },\n    { year: '1994', value: 5 },\n    { year: '1995', value: 4.9 },\n    { year: '1996', value: 6 },\n    { year: '1997', value: 7 },\n    { year: '1998', value: 9 },\n    { year: '1999', value: 13 },\n  ]\n  const config = {\n    data,\n    height: 400,\n    xField: 'year',\n    yField: 'value',\n    point: {\n      size: 5,\n      shape: 'diamond',\n    },\n    label: {\n      style: {\n        fill: '#aaa',\n      },\n    },\n  }\n  return \u003CLine {...config} \u002F\u003E\n}\n\nexport default ChartsPage\n```\n\n- `Problem`\n\nWhen run this codes, you will see error: `Expected server HTML to contain a matching \u003Cdiv\u003E in \u003Cdiv\u003E`\n\nBecause this lib is only supposed to run in the browser.\n\n- Solution\n\nTo resolve it, you need use `import JavaScript modules dynamically` by [`next\u002Fdynamic`](https:\u002F\u002Fnextjs.org\u002Fdocs\u002Fadvanced-features\u002Fdynamic-import)\n\nUpdate codes:\n\n```jsx\nimport dynamic from 'next\u002Fdynamic'\nconst Line = dynamic(\n  () =\u003E import(\"@ant-design\u002Fcharts\").then((mod) =\u003E mod.Line),\n  { ssr: false }\n)\n\nconst ChartsPage = () =\u003E {\n  const data = [\n    { year: '1991', value1: 3 },\n    { year: '1992', value: 4 },\n    { year: '1993', value: 3.5 },\n    { year: '1994', value: 5 },\n    { year: '1995', value: 4.9 },\n    { year: '1996', value: 6 },\n    { year: '1997', value: 7 },\n    { year: '1998', value: 9 },\n    { year: '1999', value: 13 },\n  ]\n  const config = {\n    data,\n    height: 400,\n    xField: 'year',\n    yField: 'value',\n    point: {\n      size: 5,\n      shape: 'diamond',\n    },\n    label: {\n      style: {\n        fill: '#aaa',\n      },\n    },\n  }\n  return \u003CLine {...config} \u002F\u003E\n}\n\nexport default ChartsPage\n```",name:bb,published_at:"2021-01-12T10:06:54.452Z",slug:"dynamic-import-next-js-en",createdAt:"2021-01-12T10:06:50.283Z",updatedAt:"2021-01-12T12:41:51.974Z",__v:c,post:v,id:bc}],id:v,path:"\u002Fblog\u002Fnext-js\u002Fdynamic-import-next-js"},{isPublished:x,isPin:ak,_id:s,name:be,slug:"class-component-react-js",publishedDate:aI,published_at:"2020-11-25T12:33:56.077Z",createdAt:"2020-11-25T12:33:54.384Z",updatedAt:"2020-11-25T12:33:56.176Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:bf,name:be,content:"## Referents\n\n- [ReactJS](https:\u002F\u002Freactjs.org\u002F)\n- [ReactJS lifecycle docs](https:\u002F\u002Freactjs.org\u002Fdocs\u002Fstate-and-lifecycle.html)\n- [ReactJS component](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html)\n- [ReactJS lifecycle diagram](https:\u002F\u002Fprojects.wojtekmaj.pl\u002Freact-lifecycle-methods-diagram\u002F)\n\n## Lifecycle\n\n![react-lifecycle](https:\u002F\u002Flive.staticflickr.com\u002F65535\u002F50635688832_db29cbdeea_b.jpg)\n\n## Eexample\n\n```jsx\nimport React from 'react'\n\nclass ClockComponent extends React.Component {\n    constructor(props) {\n        super(props)\n        \u002F\u002F Don't call this.setState() here!\n        this.state = { date: new Date() }\n    }\n\n    \u002F\u002F  to set up any subscriptions\n    componentDidMount() {\n        this.time = setInterval(() =\u003E {\n            this.changeTime()\n        }, 1000)\n    }\n\n    \u002F\u002F cleaning up any subscriptions\n    componentWillUnmount() {\n        clearInterval(this.time)\n    }\n\n    \u002F\u002F to do network requests\n    componentDidUpdate(prevProps) {\n        \u002F\u002F Typical usage (don't forget to compare props):\n        if (this.props.userID !== prevProps.userID) {\n            this.fetchData(this.props.userID);\n        }\n    }\n\n    changeTime() {\n        this.setState({ date: new Date() })\n    }\n\n    \u002F\u002F render() method is the only required method in a class component.\n    render() {\n        return (\n            \u003Cdiv className=\"clock\"\u003E\n                \u003Ch1\u003EHello! This is a class component clock.\u003C\u002Fh1\u003E\n                \u003Ch2\u003EIt is {this.state.date.toLocaleTimeString()}.\u003C\u002Fh2\u003E\n            \u003C\u002Fdiv\u003E\n        )\n    }\n}\n\nexport default ClockComponent\n```\n\n## Overview\n\n### Mounting\n\nThese methods are called in the following order when an instance of a component is being created and inserted into the DOM:\n\n- [constructor()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#constructor)\n- [static getDerivedStateFromProps()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#static-getderivedstatefromprops)\n- [render()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#render)\n- [componentDidMount()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#componentdidmount)\n\n\u003E These methods are considered legacy and you should avoid them in new code: [UNSAFE_componentWillMount()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#unsafe_componentwillmount)\n\n### Updating\n\nAn update can be caused by changes to props or state. These methods are called in the following order when a component is being re-rendered:\n\n- [static getDerivedStateFromProps()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#static-getderivedstatefromprops)\n- [shouldComponentUpdate()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#shouldcomponentupdate)\n- [render()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#render)\n- [getSnapshotBeforeUpdate()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#getsnapshotbeforeupdate)\n- [componentDidUpdate()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#componentdidupdate)\n\n- These methods are considered legacy and you should avoid them in new code: [UNSAFE_componentWillUpdate()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#unsafe_componentwillupdate), [UNSAFE_componentWillReceiveProps()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#unsafe_componentwillreceiveprops)\n\n### Unmounting\n\nThis method is called when a component is being removed from the DOM:\n\n- [componentWillUnmount()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#componentwillunmount)\n\n### Error Handling\n\nThese methods are called when there is an error during rendering, in a lifecycle method, or in the constructor of any child component.\n\n- [static getDerivedStateFromError()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#static-getderivedstatefromerror)\n- [componentDidCatch()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#componentdidcatch)\n\n### Other APIs\n\nEach component also provides some other APIs:\n\n- [setState()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#setstate)\n- [forceUpdate()](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#forceupdate)\n\n### Class Properties\n\n- [defaultProps](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#defaultprops)\n- [displayName](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#displayname)\n\n### Instance Properties\n\n- [props](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#props)\n- [state](https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-component.html#state)\n\n## Reference\n\n### constructor(props)\n\n- Constructor is the only place where you should assign this.state directly.\n- In all other methods, you need to use this.setState().\n\n### componentDidMount()\n\nThis function is invoked immediately after a component is mounted (inserted into the tree).\n\n***Use Recommend***\n\n- Initialization that requires DOM nodes should go here.\n- If you need to `load data from a remote endpoint`, this is a good place to instantiate the network request.\n- This method is `a good place to set up any subscriptions`. If you do that, don‚Äôt forget to unsubscribe in `componentWillUnmount()`.\n\n\u003E You `may call setState() immediately in componentDidMount()`. It will trigger an extra rendering, but it will happen before the browser updates the screen. This guarantees that even though the `render()` will be called twice in this case, the user won‚Äôt see the intermediate state. Use this pattern with caution because it often causes performance issues. In most cases, you should be able to assign the initial state in the `constructor()` instead. It can, however, be necessary for cases like modals and tooltips when you need to measure a DOM node before rendering something that depends on its size or position.\n\n### componentDidUpdate(prevProps, prevState, snapshot)\n\nThis funcyion is invoked immediately after updating occurs. This method is not called for the initial render.\n\n***Use Recommend***\n\n- Use this as `an opportunity to operate on the DOM` when the component has been updated.\n- This is also `a good place to do network requests` as long as you compare the current props to previous props (e.g. a network request may not be necessary if the props have not changed).\n\nYou may call `setState()` immediately in `componentDidUpdate()` but note that it must be wrapped in a condition like in the example above, or you‚Äôll cause an infinite loop. It would also cause an extra re-rendering which, while not visible to the user, can affect the component performance. If you‚Äôre trying to ‚Äúmirror‚Äù some state to a prop coming from above, consider using the prop directly instead.\n\nIf your component implements the `getSnapshotBeforeUpdate()` lifecycle (which is rare), the value it returns will be passed as a third ‚Äúsnapshot‚Äù parameter to `componentDidUpdate()`. Otherwise this parameter will be undefined.\n\n\u003E `componentDidUpdate()` will not be invoked if `shouldComponentUpdate()` returns false.\n\n### componentWillUnmount()\n\nThis function is invoked immediately before a component is unmounted and destroyed.\n\n***Use Recommend***\n\n- Perform `any necessary cleanup` in this method, such as invalidating timers, canceling network requests, or cleaning up any subscriptions that were created in componentDidMount().\n- You should not call `setState()` in `componentWillUnmount()` because the component will never be re-rendered. Once a component instance is unmounted, it will never be mounted again.\n\n### setState(updater, [callback])\n\nThis function enqueues changes to the component state and tells React that this component and its children need to be re-rendered with the updated state. This is the primary method you use to update the user interface in response to event handlers and server responses.\n\n```jsx\n# using basic\nthis.setState({quantity: 2})\n# using \nthis.setState((state, props) =\u003E {\n  return {counter: state.counter + props.step};\n});\n```\n\n",shortDescription:bg,description:bg,published_at:"2020-11-25T12:34:49.633Z",slug:"class-component-react-js-en",createdAt:"2020-11-25T12:34:46.970Z",updatedAt:"2021-01-04T19:34:31.929Z",__v:c,post:s,id:bf}],id:s,path:"\u002Fblog\u002Fnext-js\u002Fclass-component-react-js"},{isPublished:x,isPin:ak,_id:p,name:bh,slug:"setup-styled-jsx-next-js",publishedDate:aI,published_at:"2020-11-25T10:59:20.311Z",createdAt:"2020-11-25T10:58:23.223Z",updatedAt:"2020-11-25T12:15:48.133Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:bi,name:bh,content:"## Referents\n\n- [ReactJS](https:\u002F\u002Freactjs.org\u002F)\n- [styled-jsx](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fstyled-jsx)\n- [NextJS example with styled-jsx](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fnext.js\u002Ftree\u002Fcanary\u002Fexamples\u002Fwith-styled-jsx)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Informations\n\n`NEXT JS` bundle `styled-jsx` to provide support for isolated scoped CSS. The aim is to support \"shadow CSS\" similar to Web Components, which unfortunately **do not support server-rendering and are JS-only**.\n\nSee the above examples for other popular CSS-in-JS solutions (like Styled Components).\n\nA component using `styled-jsx` looks like this:\n\n```jsx\nfunction HelloWorld() {\n  return (\n    \u003Cdiv\u003E\n      Hello world\n      \u003Cp\u003Escoped!\u003C\u002Fp\u003E\n      \u003Cstyle jsx\u003E{`\n        p {\n          color: blue;\n        }\n        div {\n          background: red;\n        }\n        @media (max-width: 600px) {\n          div {\n            background: blue;\n          }\n        }\n      `}\u003C\u002Fstyle\u003E\n      \u003Cstyle global jsx\u003E{`\n        body {\n          background: black;\n        }\n      `}\u003C\u002Fstyle\u003E\n    \u003C\u002Fdiv\u003E\n  )\n}\n\nexport default HelloWorld\n```\n",shortDescription:bj,description:bj,published_at:"2020-11-25T11:01:00.576Z",slug:"setup-styled-jsx-next-js-en",createdAt:"2020-11-25T11:00:56.999Z",updatedAt:"2021-01-04T18:24:33.968Z",__v:c,post:p,id:bi}],id:p,path:"\u002Fblog\u002Fnext-js\u002Fsetup-styled-jsx-next-js"},{isPublished:x,isPin:x,_id:t,name:bk,slug:"compare-class-component-vs-function-component-react-js",publishedDate:aI,published_at:"2020-11-25T13:14:32.885Z",createdAt:"2020-11-25T13:14:20.449Z",updatedAt:"2020-11-25T13:14:32.982Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:bl,name:bk,content:"## Quiz\n\n### Why Hooks to React? \n- Hooks allow you to reuse stateful logic without changing your component hierarchy.\n- Hooks let you split one component into smaller functions based on what pieces are related (such as setting up a subscription or fetching data)\n- Hooks let you use more of React‚Äôs features without classes.\n- Hooks don‚Äôt contain any breaking changes and without rewriting any existing code. \n- Hooks provide a more direct API to the React concepts you already know: props, state, context, refs, and lifecycle. As we will show later, Hooks also offer a new powerful way to combine them.\n\n### When use Function Component or Class Component?\n- With feature\u002Fflow need to structure as a OOP pattern: use Class Component\n- With a standalone widget use Function Component\n\n\u003E More details below\n\n## Class Component\n\nReact lets you define components as classes or functions. Components defined as classes currently provide more features which are described in detail on this page. To define a React component class, you need to extend `React.Component`\n\n## Function Component with hooks\n\nHooks are a new addition in React 16.8. They let you use state and other React features without writing a class.\n\n## Compare\n\n### State\n\n#### Declaring a State Variable\n\nIn a class, we initialize the count state to 0 by setting this.state to { count: 0 } in the constructor:\n\n```jsx\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n}\n```\n\nIn a function component, we have no this, so we can‚Äôt assign or read this.state. Instead, we call the useState Hook directly inside our component:\n\n```jsx\nimport React, { useState } from 'react';\n\nfunction Example() {\n  \u002F\u002F Declare a new state variable, which we'll call \"count\"\n  \u002F\u002F It returns a pair of values: the current state and a function that updates it.\n  const [count, setCount] = useState(0);\n}\n```\n\n#### Reading State\n\nWhen we want to display the current count in a class, we read this.state.count:\n\n```jsx\n\u003Cp\u003EYou clicked {this.state.count} times\u003C\u002Fp\u003E\n```\n\nIn a `function component`\n\n```jsx\n\u003Cp\u003EYou clicked {count} times\u003C\u002Fp\u003E\n```\n\n#### Updating State\n\nIn a class, we need to call `this.setState()` to update the `count` state:\n\n```jsx\n\u003Cbutton onClick={() =\u003E this.setState({ count: this.state.count + 1 })}\u003E\n    Click me\n\u003C\u002Fbutton\u003E\n```\n\nIn a function, we already have `setCount` and `count` as variables so we don‚Äôt need `this`:\n\n```jsx\n\u003Cbutton onClick={() =\u003E setCount(count + 1)}\u003E\n    Click me\n\u003C\u002Fbutton\u003E\n```\n\n### Effect\n\n#### Effects Without Cleanup\n\nHere is a React counter `class component` that updates the document title right after React makes changes to the DOM:\n\n```jsx\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n  componentDidUpdate() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n\n  render() {\n    return (\n      \u003Cdiv\u003E\n        \u003Cp\u003EYou clicked {this.state.count} times\u003C\u002Fp\u003E\n        \u003Cbutton onClick={() =\u003E this.setState({ count: this.state.count + 1 })}\u003E\n          Click me\n        \u003C\u002Fbutton\u003E\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n```\n\n\u003E Note how `we have to duplicate the code between these two lifecycle methods in class`.\n\nThis is because in many cases we want to perform the same side effect regardless of whether the component just mounted, or if it has been updated. Conceptually, we want it to happen after every render ‚Äî but React class components don‚Äôt have a method like this. We could extract a separate method but we would still have to call it in two places.\n\nNow let‚Äôs see how we can do the same with the `useEffect` Hook.\n\n`Function component` version for above example\n\n```jsx\nimport React, { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() =\u003E {\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    \u003Cdiv\u003E\n      \u003Cp\u003EYou clicked {count} times\u003C\u002Fp\u003E\n      \u003Cbutton onClick={() =\u003E setCount(count + 1)}\u003E\n        Click me\n      \u003C\u002Fbutton\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n```\n\n- **What does useEffect do?** By using this Hook, you tell React that your component needs to do something after render. React will remember the function you passed (we‚Äôll refer to it as our ‚Äúeffect‚Äù), and call it later after performing the DOM updates. In this effect, we set the document title, but we could also perform data fetching or call some other imperative API.\n\n- **Why is useEffect called inside a component?** Placing `useEffect` inside the component lets us access the count state variable (or any props) right from the effect. We don‚Äôt need a special API to read it ‚Äî it‚Äôs already in the function scope. Hooks embrace JavaScript closures and avoid introducing React-specific APIs where JavaScript already provides a solution.\n\n- **Does useEffect run after every render?** Yes! By default, it runs both after the first render and after every update.\n\n#### Effects with Cleanup\n\n**Example Using Classes**, In a React class, you would typically set up a subscription in `componentDidMount`, and clean it up in `componentWillUnmount`. For example, let‚Äôs say we have a ChatAPI module that lets us subscribe to a friend‚Äôs online status. Here‚Äôs how we might subscribe and display that status using a class:\n\n```jsx\nclass FriendStatus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOnline: null };\n    this.handleStatusChange = this.handleStatusChange.bind(this);\n  }\n\n  componentDidMount() {\n    ChatAPI.subscribeToFriendStatus(\n      this.props.friend.id,\n      this.handleStatusChange\n    );\n  }\n  componentWillUnmount() {\n    ChatAPI.unsubscribeFromFriendStatus(\n      this.props.friend.id,\n      this.handleStatusChange\n    );\n  }\n  handleStatusChange(status) {\n    this.setState({\n      isOnline: status.isOnline\n    });\n  }\n\n  render() {\n    if (this.state.isOnline === null) {\n      return 'Loading...';\n    }\n    return this.state.isOnline ? 'Online' : 'Offline';\n  }\n}\n```\n\n**Example Using Hooks**, You might be thinking that we‚Äôd need a separate effect to perform the cleanup. But code for adding and removing a subscription is so tightly related that `useEffect` is designed to keep it together. If your effect returns a function, React will run it when it is time to clean up:\n\n```jsx\nimport React, { useState, useEffect } from 'react';\n\nfunction FriendStatus(props) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() =\u003E {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    \u002F\u002F Specify how to clean up after this effect:\n    return function cleanup() {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n\n  if (isOnline === null) {\n    return 'Loading...';\n  }\n  return isOnline ? 'Online' : 'Offline';\n}\n```\n\n- **Why did we return a function from our effect?** This is the optional cleanup mechanism for effects. Every effect may return a function that cleans up after it. This lets us keep the logic for adding and removing subscriptions close to each other. They‚Äôre part of the same effect!\n\n- **When exactly does React clean up an effect?** React performs the cleanup when the component unmounts. However, as we learned earlier, effects run for every render and not just once. This is why React also cleans up effects from the previous render before running the effects next time.\n\n#### Why Effects Run on Each Update\n\nIn a class component, we would need to add `componentDidUpdate` to handle when `this.props.friend is changed`:\n\n```jsx\nclass FriendStatus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOnline: null };\n    this.handleStatusChange = this.handleStatusChange.bind(this);\n  }\n\n  componentDidMount() {\n    ChatAPI.subscribeToFriendStatus(\n      this.props.friend.id,\n      this.handleStatusChange\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    \u002F\u002F Unsubscribe from the previous friend.id\n    ChatAPI.unsubscribeFromFriendStatus(\n      prevProps.friend.id,\n      this.handleStatusChange\n    );\n    \u002F\u002F Subscribe to the next friend.id\n    ChatAPI.subscribeToFriendStatus(\n      this.props.friend.id,\n      this.handleStatusChange\n    );\n  }\n\n  componentWillUnmount() {\n    ChatAPI.unsubscribeFromFriendStatus(\n      this.props.friend.id,\n      this.handleStatusChange\n    );\n  }\n}\n```\n\nNow consider the version of this component that uses Hooks:\n\n```jsx\nfunction FriendStatus(props) {\n  \u002F\u002F ...\n  useEffect(() =\u003E {\n    \u002F\u002F ...\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    return () =\u003E {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n}\n```\n\n#### Optimizing Performance by Skipping Effects\n\nIn some cases, cleaning up or applying the effect after every render might create a performance problem. In class components, we can solve this by writing an extra comparison with `prevProps` or `prevState` inside `componentDidUpdate`:\n\n```jsx\ncomponentDidUpdate(prevProps, prevState) {\n  if (prevState.count !== this.state.count) {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n}\n```\n\nThis requirement is common enough that it is built into the `useEffect` Hook API. You can tell React to skip applying an effect if certain values haven‚Äôt changed between re-renders. To do so, pass an array as an optional second argument to `useEffect`:\n\n```jsx\nuseEffect(() =\u003E {\n  document.title = `You clicked ${count} times`;\n}, [count]); \u002F\u002F Only re-run the effect if count changes\n```\n",shortDescription:bm,description:bm,published_at:"2020-11-25T13:15:37.091Z",slug:"compare-class-component-vs-function-component-react-js-en",createdAt:"2020-11-25T13:15:33.943Z",updatedAt:"2021-01-04T19:20:20.771Z",__v:c,post:t,id:bl}],id:t,path:"\u002Fblog\u002Fnext-js\u002Fcompare-class-component-vs-function-component-react-js"},{isPublished:x,isPin:ak,_id:q,name:bn,slug:"setup-styled-components-next-js-server-side-rendering",publishedDate:aI,published_at:"2020-11-25T12:16:40.385Z",createdAt:"2020-11-25T12:16:38.344Z",updatedAt:"2020-11-25T12:16:40.482Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:bo,name:bn,content:"## Referents\n\n- [ReactJS](https:\u002F\u002Freactjs.org\u002F)\n- [styled-components](https:\u002F\u002Fstyled-components.com\u002F)\n- [NextJS example with styled-components](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fnext.js\u002Ftree\u002Fmaster\u002Fexamples\u002Fwith-styled-components)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Install libs\n\n```bash\nyarn add styled-components\n\n# custom babel\nyarn add -D babel-plugin-styled-components\n# if you not custom babel. You will see error when build\n```\n\n## Update\n\nUpdate file `\u002F.babelrc`\n\n```json\n{\n  \"presets\": [\"next\u002Fbabel\"],\n  \"plugins\": [[\"styled-components\", { \"ssr\": true }]]\n}\n```\n\n## Finally, let‚Äôs update `\u002Fpages\u002F_document.js`\n\n`styled-components` creates an instance of `ServerStyleSheet` - this stylesheet retrieves any styles found in all the components inside our \u003CApp \u002F\u003E. This then gets passed into our Html template later on.\n\n```jsx\nimport Document from 'next\u002Fdocument'\nimport { ServerStyleSheet } from 'styled-components'\n\nexport default class MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const sheet = new ServerStyleSheet()\n    const originalRenderPage = ctx.renderPage\n\n    try {\n      ctx.renderPage = () =\u003E\n        originalRenderPage({\n          enhanceApp: (App) =\u003E (props) =\u003E\n            sheet.collectStyles(\u003CApp {...props} \u002F\u003E),\n        })\n\n      const initialProps = await Document.getInitialProps(ctx)\n      return {\n        ...initialProps,\n        styles: (\n          \u003C\u003E\n            {initialProps.styles}\n            {sheet.getStyleElement()}\n          \u003C\u002F\u003E\n        ),\n      }\n    } finally {\n      sheet.seal()\n    }\n  }\n}\n```\n\n## Let enjoy\n\nExample update `\u002Fpages\u002Findex.js`\n\n```jsx\nimport Head from 'next\u002Fhead'\nimport styled, { createGlobalStyle } from 'styled-components'\n\nconst GlobalStyle = createGlobalStyle`\n h1 {\n   font-size: 4rem;\n }\n`\nconst Container = styled.div`\n  text-align: center;\n`\nconst Title = styled.h1`\n  font-size: 50px;\n  color: #0070f3;\n`\n\nconst Button = styled.button`\n  color: ${props =\u003E\n    props.primary ? 'hotpink' : 'turquoise'};\n`\n\nconst HomePage = () =\u003E {\n  return (\n    \u003C\u003E\n      \u003CHead\u003E\n        \u003Ctitle\u003ESSR styled-components with Next.js Starter\u003C\u002Ftitle\u003E\n      \u003C\u002FHead\u003E\n      \u003CContainer\u003E\n        \u003CGlobalStyle \u002F\u003E\n        \u003CTitle\u003EHello, world!\u003C\u002FTitle\u003E\n        \u003CButton\u003EThis is a regular button.\u003C\u002FButton\u003E\n        \u003CButton primary\u003EThis is a primary button.\u003C\u002FButton\u003E\n      \u003C\u002FContainer\u003E\n    \u003C\u002F\u003E\n  )\n}\n\nexport default HomePage\n```\n\n",shortDescription:bp,description:bp,published_at:"2020-11-25T12:18:46.314Z",createdAt:"2020-11-25T12:18:23.836Z",updatedAt:"2021-01-04T18:24:10.044Z",__v:c,slug:"setup-styled-components-next-js-server-side-rendering-en",post:q,id:bo}],id:q,path:"\u002Fblog\u002Fnext-js\u002Fsetup-styled-components-next-js-server-side-rendering"},{isPublished:x,isPin:ak,_id:r,name:bq,slug:"setup-emotion-next-js",publishedDate:aI,published_at:"2020-11-25T12:25:22.864Z",createdAt:"2020-11-25T12:25:18.830Z",updatedAt:"2020-11-25T12:26:22.530Z",__v:c,author:{_id:g,name:al,displayName:am,createdAt:k,updatedAt:an,__v:c,cover:{_id:l,name:ao,alternativeText:e,caption:e,hash:ap,ext:a,mime:b,size:aq,width:m,height:m,url:ar,formats:{thumbnail:{name:as,hash:at,ext:a,mime:b,width:n,height:n,size:au,path:d,url:av},small:{name:aw,hash:ax,ext:a,mime:b,width:f,height:f,size:ay,path:d,url:az}},provider:i,related:[g],createdAt:aA,updatedAt:aB,__v:c,id:l},published_at:k,id:g},category:{position:aC,_id:j,name:aD,slug:y,description:aE,published_at:aF,createdAt:aG,updatedAt:aH,__v:c,id:j},cover:{_id:h,name:z,alternativeText:e,caption:e,hash:A,ext:a,mime:b,size:B,width:C,height:f,url:D,formats:{thumbnail:{name:E,hash:F,ext:a,mime:b,width:G,height:H,size:I,path:d,url:J},medium:{name:K,hash:L,ext:a,mime:b,width:M,height:N,size:O,path:d,url:P},small:{name:Q,hash:R,ext:a,mime:b,width:f,height:S,size:T,path:d,url:U}},provider:i,related:[V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,p,q,r,af,s,t,u,v,w,ag,o],createdAt:ah,updatedAt:ai,__v:c,id:h},trans_posts:[{lang:aj,_id:br,content:"## Referents\n\n- [ReactJS](https:\u002F\u002Freactjs.org\u002F)\n- [emotion](https:\u002F\u002Fgithub.com\u002Femotion-js\u002Femotion\u002F)\n- [NextJS example with emotion](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fnext.js\u002Ftree\u002Fcanary\u002Fexamples\u002Fwith-emotion)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Install libs\n\n```bash\nyarn add @emotion\u002Freact @emotion\u002Fstyled\n\n# custom babel\nyarn add -D @emotion\u002Fbabel-plugin\n# if you not custom babel. You will see error when build\n```\n\n## Update\n\nUpdate file `\u002F.babelrc`\n\n```json\n{\n  \"presets\": [\n    [\n      \"next\u002Fbabel\",\n      {\n        \"preset-react\": {\n          \"runtime\": \"automatic\",\n          \"importSource\": \"@emotion\u002Freact\"\n        }\n      }\n    ]\n  ],\n  \"plugins\": [\"@emotion\u002Fbabel-plugin\"]\n}\n```\n\n## Let enjoy\n\nExample update `\u002Fpages\u002Findex.js`\n\n```jsx\nimport { css, Global, jsx } from '@emotion\u002Freact'\nimport styled from '@emotion\u002Fstyled'\n\nconst globalStyles = (\n  \u003CGlobal\n    styles={css`\n      html,\n      body {\n        padding: 3rem 1rem;\n        margin: 0;\n        background: papayawhip;\n        min-height: 100%;\n        font-family: Helvetica, Arial, sans-serif;\n        font-size: 24px;\n      }\n    `}\n  \u002F\u003E\n)\n\nconst Title = styled.h1`\n  font-size: 50px;\n  color: #0070f3;\n  text-align: center\n`\n\nconst Button = styled.button`\n  color: ${props =\u003E\n    props.primary ? 'hotpink' : 'turquoise'};\n`\n\nconst Container = styled.div(props =\u003E ({\n  display: 'flex',\n  flexDirection: props.column && 'column'\n}))\n\nconst HomePage = () =\u003E {\n  return (\n    \u003C\u003E\n      { globalStyles }\n      \u003CContainer column\u003E\n        \u003CTitle\u003EExample\u003C\u002FTitle\u003E\n        \u003CButton\u003EThis is a regular button.\u003C\u002FButton\u003E\n        \u003CButton primary\u003EThis is a primary button.\u003C\u002FButton\u003E\n      \u003C\u002FContainer\u003E\n    \u003C\u002F\u003E\n  )\n}\n\nexport default HomePage\n```\n",name:bq,shortDescription:bs,description:bs,published_at:"2020-11-25T12:26:48.110Z",slug:"setup-emotion-next-js-en",createdAt:"2020-11-25T12:26:44.977Z",updatedAt:"2021-01-04T18:24:59.933Z",__v:c,post:r,id:br}],id:r,path:"\u002Fblog\u002Fnext-js\u002Fsetup-emotion-next-js"}]}},{cate:y,slug:aN,page:{lang:aj,_id:aK,name:aJ,content:aS,shortDescription:aL,description:aL,published_at:aT,slug:aU,createdAt:aV,updatedAt:aW,__v:c,post:{isPublished:x,isPin:ak,_id:o,name:aJ,slug:aN,publishedDate:aO,published_at:aP,createdAt:aQ,updatedAt:aR,__v:c,author:g,category:j,cover:bt,id:o},id:aK,html:"\u003Ch2 id=\"Referents\"\u003EReferents\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fnextjs.org\u002F\"\u003ENext JS\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ffirebase.google.com\u002Fdocs\u002Fauth\u002Fweb\u002Fgoogle-signin\"\u003EFirebase\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F\"\u003ETP NextJS\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"Install-libs\"\u003EInstall libs\u003C\u002Fh2\u003E\n\u003Cpre class=\"nuxt-content-highlight hljs\"\u003E\u003Ccode\u003Eyarn add firebase\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"Update-ENV\"\u003EUpdate ENV\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EAdd file '.env'\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"nuxt-content-highlight hljs\"\u003E\u003Ccode\u003ENEXT_PUBLIC_APP_NAME=\nNEXT_PUBLIC_FIREBASE_API_KEY=\nNEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=\nNEXT_PUBLIC_FIREBASE_DATABASE_URL=\nNEXT_PUBLIC_FIREBASE_PROJECT_ID=\nNEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=\nNEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=\nNEXT_PUBLIC_FIREBASE_APP_ID=\nNEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"Follow-structure\"\u003EFollow structure\u003C\u002Fh2\u003E\n\u003Cpre class=\"nuxt-content-highlight hljs\"\u003E\u003Ccode\u003E.\n‚îú‚îÄ‚îÄ üìÅ assets\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ styles\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìù globals.scss\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ images\n‚îú‚îÄ‚îÄ üìÅ auth\n‚îÇ   ‚îú‚îÄ‚îÄ üìù fireinit.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù index.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìù routes.jsx (*)\n‚îú‚îÄ‚îÄ üìÅ components\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ common\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ partials\n‚îú‚îÄ‚îÄ üìÅ layouts\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components\n‚îÇ   ‚îú‚îÄ‚îÄ üìù \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E.jsx\n‚îÇ   ‚îî‚îÄ‚îÄ üìù error.jsx\n‚îú‚îÄ‚îÄ üìÅ pages\n‚îÇ   ‚îú‚îÄ‚îÄ üìù _app.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù login.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù user.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìù index.jsx\n‚îú‚îÄ‚îÄ üìÅ public\n‚îú‚îÄ‚îÄ üìÅ shared\n‚îÇ   ‚îú‚îÄ‚îÄ üìùconfig.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ services\n‚îú‚îÄ‚îÄ üìù .env\n‚îú‚îÄ‚îÄ üìù .env.development\n‚îú‚îÄ‚îÄ üìù .env.production\n‚îú‚îÄ‚îÄ üìù jsconfig.js\n‚îú‚îÄ‚îÄ üìù next.config.js\n‚îî‚îÄ‚îÄ üìù README.md\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003E(*) Please read content files \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ftampm92\u002Ftp-nextjs-react-bootstrap\"\u003Ehere\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n",toc:[{id:bu,depth:aM,text:bu},{id:"Install-libs",depth:aM,text:"Install libs"},{id:"Update-ENV",depth:aM,text:"Update ENV"},{id:"Follow-structure",depth:aM,text:"Follow structure"}],langFallback:x},cover:bt}],fetch:[],mutations:[]}}(".jpg","image\u002Fjpeg",0,null,"",500,"5f6a400fcc83ce0b0400810e","5f6b751a4a83ec1e8be4c135","aws-s3","5fb5581c313504305ce8ab89","2020-09-22T18:18:55.730Z","5f6a400bcc83ce0b0400810d",600,156,"6008ce49632cee4f1c1e0314","5fbe38cf1ddab21fa4483e19","5fbe4b261ddab21fa4483e1c","5fbe4d2e97ac0834ec9d7768","5fbe4f3297ac0834ec9d776e","5fbe58ac97ac0834ec9d7771","5ffd6c0b992fdb24c467cbb1","5ffd7313d34f85258ca6e97b","5ffd8896431a1b304c530790",true,"next-js","thumb-blog.jpg","thumb_blog_91373f41ff",116.31,1000,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fthumb_blog_91373f41ff.jpg","thumbnail_thumb-blog.jpg","thumbnail_thumb_blog_91373f41ff",245,123,9.4,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fthumbnail_thumb_blog_91373f41ff.jpg","medium_thumb-blog.jpg","medium_thumb_blog_91373f41ff",750,375,68.23,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fmedium_thumb_blog_91373f41ff.jpg","small_thumb-blog.jpg","small_thumb_blog_91373f41ff",250,33.62,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fsmall_thumb_blog_91373f41ff.jpg","5f6b3771c065060f7779c837","5f6b378cc065060f7779c838","5f6b63430e35901435e1968d","5f7395c80050ab1560f47271","5f739ec40050ab1560f47274","5f739f4d0050ab1560f47277","5f73a1020050ab1560f4727a","5f747640f6957a0acfcf1f29","5fa05249c8cb2d1a0ab71def","5fb558bd313504305ce8ab8a","5fb55bc3313504305ce8ab8d","5fbe36ea1ddab21fa4483e16","5fbe4e8697ac0834ec9d776b","5ffd90c5c0e5054184fbceaa","2020-09-23T16:17:30.161Z","2021-01-21T00:43:53.127Z","en",false,"tampm","Tam Phan","2020-09-22T18:18:55.815Z","tp-600.jpg","tp_600_736fcf4df9",14.12,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Ftp_600_736fcf4df9.jpg","thumbnail_tp-600.jpg","thumbnail_tp_600_736fcf4df9",3.55,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fthumbnail_tp_600_736fcf4df9.jpg","small_tp-600.jpg","small_tp_600_736fcf4df9",11.89,"https:\u002F\u002Ftp-website-bucket.s3.eu-west-3.amazonaws.com\u002Fsmall_tp_600_736fcf4df9.jpg","2020-09-22T18:18:51.943Z","2020-09-22T18:18:55.778Z",4,"Next JS","Next.js is a React framework that is bound to ease your life as a React developer by abstracting away the common and redundant tasks (such as routing) into relatively simpler and powerful APIs. That way, you can focus on writing your apps instead of reinventing the wheel.","2020-11-18T17:21:40.402Z","2020-11-18T17:21:32.838Z","2020-11-18T17:21:40.462Z","2020-11-25","Setup firebase for Next JS","6008cead632cee4f1c1e0316","Guide setup firebase for nextjs",2,"setup-firebase-for-next-js","2021-01-21","2021-01-21T00:43:55.154Z","2021-01-21T00:43:53.050Z","2021-01-21T00:43:55.262Z","## Referents\n\n- [Next JS](https:\u002F\u002Fnextjs.org\u002F)\n- [Firebase](https:\u002F\u002Ffirebase.google.com\u002Fdocs\u002Fauth\u002Fweb\u002Fgoogle-signin)\n- [TP NextJS](https:\u002F\u002Ftampm.com\u002Fblog\u002Fnext-js\u002F)\n\n## Install libs\n\n```bash\nyarn add firebase\n```\n\n## Update ENV\n\n- Add file '.env'\n\n```js\nNEXT_PUBLIC_APP_NAME=\nNEXT_PUBLIC_FIREBASE_API_KEY=\nNEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=\nNEXT_PUBLIC_FIREBASE_DATABASE_URL=\nNEXT_PUBLIC_FIREBASE_PROJECT_ID=\nNEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=\nNEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=\nNEXT_PUBLIC_FIREBASE_APP_ID=\nNEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=\n\n```\n\n## Follow structure\n\n```js\n.\n‚îú‚îÄ‚îÄ üìÅ assets\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ styles\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìù globals.scss\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ images\n‚îú‚îÄ‚îÄ üìÅ auth\n‚îÇ   ‚îú‚îÄ‚îÄ üìù fireinit.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù index.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìù routes.jsx (*)\n‚îú‚îÄ‚îÄ üìÅ components\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ common\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ partials\n‚îú‚îÄ‚îÄ üìÅ layouts\n‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components\n‚îÇ   ‚îú‚îÄ‚îÄ üìù default.jsx\n‚îÇ   ‚îî‚îÄ‚îÄ üìù error.jsx\n‚îú‚îÄ‚îÄ üìÅ pages\n‚îÇ   ‚îú‚îÄ‚îÄ üìù _app.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù login.jsx (*)\n‚îÇ   ‚îú‚îÄ‚îÄ üìù user.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìù index.jsx\n‚îú‚îÄ‚îÄ üìÅ public\n‚îú‚îÄ‚îÄ üìÅ shared\n‚îÇ   ‚îú‚îÄ‚îÄ üìùconfig.jsx (*)\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ services\n‚îú‚îÄ‚îÄ üìù .env\n‚îú‚îÄ‚îÄ üìù .env.development\n‚îú‚îÄ‚îÄ üìù .env.production\n‚îú‚îÄ‚îÄ üìù jsconfig.js\n‚îú‚îÄ‚îÄ üìù next.config.js\n‚îî‚îÄ‚îÄ üìù README.md\n```\n\n\u003E **(*) Please read content files [here](https:\u002F\u002Fgithub.com\u002Ftampm92\u002Ftp-nextjs-react-bootstrap)**\n","2021-01-21T00:45:36.420Z","setup-firebase-for-next-js-en","2021-01-21T00:45:33.232Z","2021-01-21T00:45:36.506Z","NextJS import SVG","5ffd72b1d34f85258ca6e97a","Webpack loader for SVGR.","Next-Auth","2021-01-12","5ffd6d50f0ff7c3c90b77d0b","Dynamic import - Next JS","5ffd74bad34f85258ca6e97f","Next.js supports ES2020 dynamic import() for JavaScript. With it you can import JavaScript modules dynamically and work with them. They also work with SSR.","Class Component - React JS","5fbe4f6697ac0834ec9d7770","What is Class Component - React JS","Setup styled-jsx - Next JS","5fbe39681ddab21fa4483e1b","How to setup styled-jsx with Next JS by TP","Compare Class Component VS Function Component - React JS","5fbe58f597ac0834ec9d7773","Compare Class Component VS Function Component - REACT JS","Setup styled-components - NEXT JS - Server side rendering","5fbe4b8f1ddab21fa4483e1e","How to setup styled-components with NextJS by TP","Setup emotion - Next JS","5fbe4d8497ac0834ec9d776a","How to setup emotion with Next JS by TP",{},"Referents")));